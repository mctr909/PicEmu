# ニーモニック

## 転送命令
|当CPU||PIC16F1||14bitコード|周期|説明|
|:-|:-|:-|:-|:-|:-|:-|
|mov|f,w|MOVWF|f  |00 0000 1fff ffff|1|ファイルレジスタ←作業レジスタ|
|mov|w,0|CLRW |   |00 0001 0000 0000|1|作業レジスタ←0|
|mov|f,0|CLRF |f  |00 0001 1fff ffff|1|ファイルレジスタ←0|
|mov|w,f|MOVF |f,W|00 1000 0fff ffff|1|作業レジスタ←ファイルレジスタ|
|mov|w,v|MOVLW|v  |11 0000 vvvv vvvv|1|作業レジスタ←即値|

## 演算命令
|当CPU||PIC16F1||14bitコード|周期|説明|
|:-|:-|:-|:-|:-|:-|:-|
|sub|d,f|SUBWF|f,d|00 0010 dfff ffff|1|減算 f-w|
|ior|d,f|IORWF|f,d|00 0100 dfff ffff|1|包含的論理和|
|and|d,f|ANDWF|f,d|00 0101 dfff ffff|1|論理積|
|xor|d,f|XORWF|f,d|00 0110 dfff ffff|1|排他的論理和|
|add|d,f|ADDWF|f,d|00 0111 dfff ffff|1|加算 f+w|
|swn|d,f|SWAPF|f,d|00 1110 dfff ffff|1|ニブル交換|
|clb|f,b|BCF  |f,b|01 00bb bfff ffff|1|ビットクリア|
|stb|f,b|BSF  |f,b|01 01bb bfff ffff|1|ビット設定|
|shl|d,f|LSLF |f,d|11 0101 dfff ffff|1|左論理シフト|
|shr|d,f|LSRF |f,d|11 0110 dfff ffff|1|右論理シフト|
|sar|d,f|ASRF |f,d|11 0111 dfff ffff|1|右算術シフト|
|sbb|d,f|SUBWFB|f,d|11 1011 dfff ffff|1|減算 f-w-C|
|adc|d,f|ADDWFC|f,d|11 1101 dfff ffff|1|加算 f+w+C|

## 即値演算命令
|当CPU||PIC16F1||14bitコード|周期|説明|
|:-|:-|:-|:-|:-|:-|:-|
|ior|w,v|IORLW|v|11 1000 vvvv vvvv|1|包含的論理和|
|and|w,v|ANDLW|v|11 1001 vvvv vvvv|1|論理積|
|xor|w,v|XORLW|v|11 1010 vvvv vvvv|1|排他的論理和|
|sub|w,v|SUBLW|v|11 1100 vvvv vvvv|1|減算 v-w|
|add|w,v|ADDLW|v|11 1110 vvvv vvvv|1|加算 v+w|

## 制御命令
|当CPU||PIC16F1||14bitコード|周期|説明|
|:-|:-|:-|:-|:-|:-|:-|
|nop| |NOP ||00 0000 0000 0000|1|何もしない|
|ret| |RETURN||00 0000 0000 1000|2|サブルーチンから復帰|
|ret| |RETFIE||00 0000 0000 1001|2|割込ルーチンから復帰<br>アセンブラにより割込ルーチンであるかを判定|
|chbk|k|MOVLB|k|00 0000 001k kkkk|1|[制御レジスタ](#制御レジスタ)のバンク切替に使用|
|dec|d,f|DECFSZ|f,d|00 1011 dfff ffff|1(2)|デクリメント<br>実行結果が0であれば直後の命令をスキップ<br>スキップ時2周期| 
|inc|d,f|INCFSZ|f,d|00 1111 dfff ffff|1(2)|インクリメント<br>実行結果が0であれば直後の命令をスキップ<br>スキップ時2周期|
|tb0|f,b|BTFSC|f,b|01 10bb bfff ffff|1(2)|対象ビットが0であるか<br>0であれば直後の命令をスキップ<br>スキップ時2周期|
|tb1|f,b|BTFSS|f,b|01 11bb bfff ffff|1(2)|対象ビットが1であるか<br>1であれば直後の命令をスキップ<br>スキップ時2周期|
|call|a|CALL|a|10 0aaa aaaa aaaa|2|サブルーチン呼び出し|
|goto|a|GOTO|a|10 1aaa aaaa aaaa|2|絶対ジャンプ|
|chph|p|MOVLP|p|11 0001 1ppp pppp|1|プログラムカウンタの上位を設定<br>goto(絶対ジャンプ)とcallの直前で使用|
|goto|r|BRA |r|11 001r rrrr rrrr|2|相対ジャンプ|
|ret|v|RETLW|v|11 0100 vvvv vvvv|2|呼び出し元への復帰<br>同時に作業レジスタに即値を設定|

## 間接参照命令
|当CPU||PIC16F1||14bitコード|周期|説明|
|:-|:-|:-|:-|:-|:-|:-|
|ldw|fp0++|MOVIW|FSR0++|00 0000 0001 0010|1|作業レジスタ←自由領域ポインタ0が示すレジスタ<br>読込後に自由領域ポインタ0を1進める|
|ldw|fp0--|MOVIW|FSR0--|00 0000 0001 0011|1|作業レジスタ←自由領域ポインタ0が示すレジスタ<br>読込後に自由領域ポインタ0を1戻す|
|ldw|fp1++|MOVIW|FSR1++|00 0000 0001 0110|1|作業レジスタ←自由領域ポインタ1が示すレジスタ<br>読込後に自由領域ポインタ1を1進める|
|ldw|fp1--|MOVIW|FSR1--|00 0000 0001 0111|1|作業レジスタ←自由領域ポインタ1が示すレジスタ<br>読込後に自由領域ポインタ1を1戻す|
|stw|fp0++|MOVWI|FSR0++|00 0000 0001 1010|1|自由領域ポインタ0が示すレジスタ←作業レジスタ<br>書込後に自由領域ポインタ0を1進める|
|stw|fp0--|MOVWI|FSR0--|00 0000 0001 1011|1|自由領域ポインタ0が示すレジスタ←作業レジスタ<br>書込後に自由領域ポインタ0を1戻す|
|stw|fp1++|MOVWI|FSR1++|00 0000 0001 1110|1|自由領域ポインタ1が示すレジスタ←作業レジスタ<br>書込後に自由領域ポインタ1を1進める|
|stw|fp1--|MOVWI|FSR1--|00 0000 0001 1111|1|自由領域ポインタ1が示すレジスタ←作業レジスタ<br>書込後に自由領域ポインタ1を1戻す|
|mov|fp0l,w|MOVWF|FSR0L|00 0000 1000 0100|1|自由領域ポインタ0の下位←作業レジスタ|
|mov|fp0h,w|MOVWF|FSR0H|00 0000 1000 0101|1|自由領域ポインタ0の上位←作業レジスタ|
|mov|fp1l,w|MOVWF|FSR1L|00 0000 1000 0110|1|自由領域ポインタ1の下位←作業レジスタ|
|mov|fp1h,w|MOVWF|FSR1H|00 0000 1000 0111|1|自由領域ポインタ1の上位←作業レジスタ|
|add|fp0,n|ADDFSR|FSR0,n|11 0001 00nn nnnn|1|自由領域ポインタ0に対して差分を加える|
|add|fp1,n|ADDFSR|FSR1,n|11 0001 01nn nnnn|1|自由領域ポインタ1に対して差分を加える|
|ldw|fp0,n|MOVIW|FSR0+n|11 1111 00nn nnnn|1|作業レジスタ←自由領域ポインタ0+nが示すレジスタ|
|ldw|fp1,n|MOVIW|FSR1+n|11 1111 01nn nnnn|1|作業レジスタ←自由領域ポインタ1+nが示すレジスタ|
|stw|fp0,n|MOVWI|FSR0+n|11 1111 10nn nnnn|1|自由領域ポインタ0+nが示すレジスタ←作業レジスタ|
|stw|fp1,n|MOVWI|FSR1+n|11 1111 11nn nnnn|1|自由領域ポインタ1+nが示すレジスタ←作業レジスタ|

### オペランド表
|記号|説明|値の範囲|
|:-|:-|:-|
|w|[作業レジスタ](#コアレジスタ)||
|f|[ファイルレジスタ](#ファイルレジスタ)|0-127|
|d|破壊対象レジスタを指定<br>0:作業レジスタ　値ラベルとしてwを用意<br>1:ファイルレジスタ　値ラベルとしてfを用意|0-1|
|b|対象ビットを指定|0-7|
|v|即値|0-255|
|k|バンクを指定|0-31|
|r|相対アドレス|-256-+255|
|a|プログラムカウンタの下位(0-10ビット)を指定|0-2047|
|p|プログラムカウンタの上位(8-14ビット)を指定<br>goto(絶対ジャンプ)とcallの呼出時に反映<br>8-10ビットは無視|0-127|
|n|自由領域ポインタ差分|-32-+31|
|fp0l|[自由領域ポインタ0の下位](#コアレジスタ)|0-255|
|fp0h|[自由領域ポインタ0の上位](#コアレジスタ)|32-41|
|fp0|自由領域ポインタ0<br>実体は上記(上位/下位)|8192-10591|
|fp1l|[自由領域ポインタ1の下位](#コアレジスタ)|0-255|
|fp1h|[自由領域ポインタ1の上位](#コアレジスタ)|32-41|
|fp1|自由領域ポインタ1<br>実体は上記(上位/下位)|8192-10591|

- プログラムと[データ(ファイルレジスタ)](#ファイルレジスタ)はそれぞれ別のメモリに格納
- プログラムカウンタは15ビット
- ハードウェアスタック16段

---
---

# ファイルレジスタ
|範囲|名称|説明||
|-:|:-|:-|:-|
|0x00-0B|[コアレジスタ](#コアレジスタ)|制御用の値|全バンクに渡って共有|
|0x0C-1F|[制御レジスタ](#制御レジスタ)|デバイス設定や入出力|バンク毎に独立|
|0x20-6F|自由領域|データや変数として使用|バンク毎に独立|
|0x70-7F|共有RAM|バンク間の値共有|全バンクに渡って共有|

- ファイルレジスタのラベルとしてr0-r127を用意
- ニーモニック(equ 変数名,r)によってファイルレジスタに対して変数名を定義可能
- 32のバンクそれぞれにファイルレジスタ0x00-7Fがあり、バンク0-31をメモリ上に連続配置
- 自由領域ポインタ(fp0/fp1)の開始値は8192  
  バンク0のファイルレジスタ0x20に対応し、バンク29のファイルレジスタ0x6Fまで自由領域に対して連続参照可能

## コアレジスタ
>|番号|ラベル|説明||
>|-:|:-|:-|:-|
>|0x00||||
>|0x01||||
>|0x02|PCL|プログラムカウンタの下位|0-7|
>|0x0A|PCH|プログラムカウンタの上位|8-14|
>|0x03|FLG|[フラグレジスタ](#フラグレジスタ)||
>|0x04|fp0l|自由領域ポインタ0の下位|0-7|
>|0x05|fp0h|自由領域ポインタ0の上位|8-13|
>|0x06|fp1l|自由領域ポインタ1の下位|0-7|
>|0x07|fp1h|自由領域ポインタ1の上位|8-13|
>|0x08|BANK|バンク|0-5|
>|0x09|w|作業レジスタ|0-7|
>|0x0B|ITC|[割込制御レジスタ](#割込制御レジスタ)||

>### **フラグレジスタ**
>---
>|bit|ラベル|説明|
>|--:|:----|:---|
>|2|Z|ゼロフラグ|
>|1|DC|ディジットキャリーフラグ|
>|0|C|キャリーフラグ|

>### **割込制御レジスタ**
>---
>|bit|ラベル|説明|
>|--:|:----|:---|
>|7|GIE|**G**lobal **I**nterrupt **E**nable|
>|6|PIE|**P**eripheral **I**nterrupt **E**nable|
>|5|T0E|**T**imer**0** Overflow Interrupt **E**nable|
>|4|EIE|**E**xternal **I**nterrupt **E**nable|
>|3|ICE|**I**nterrupt on **C**hange **E**nable|
>|2|T0F|**T**imer**0** Overflow Interrupt **F**lag|
>|1|EIF|**E**xternal **I**nterrupt **F**lag|
>|0|ICF|**I**nterrupt on **C**hange Interrupt **F**lag|

## 制御レジスタ
>|バンク00|ラベル--------|バンク01|ラベル--------|バンク02|ラベル--------|バンク03|ラベル--------|
>|-:|:-|-:|:-|-:|:-|-:|:-|
>|0x0C|PORTA|0x0C|TRISA|0x0C|LATA|0x0C|ANSELA|
>|0x0D|-|0x0D|-|0x0D|-|0x0D|-|
>|0x0E|PORTC|0x0E|TRISC|0x0E|LATC|0x0E|ANSELC|
>|0x0F|-|0x0F|-|0x0F|-|0x0F|-|
>|0x10|-|0x10|-|0x10|-|0x10|-|
>|0x11|PIR1|0x11|PIE1|0x11|-|0x11|-|
>|0x12|PIR2|0x12|PIE2|0x12|-|0x12|-|
>|0x13|PIR3|0x13|PIE3|0x13|-|0x13|-|
>|0x14|-|0x14|-|0x14|-|0x14|-|
>|0x15|TMR0|0x15|OPTION_REG|0x15|-|0x15|-|
>|0x16|TMR1L|0x16|PCON|0x16|-|0x16|-|
>|0x17|TMR1H|0x17|WDTCON|0x17|-|0x17|-|
>|0x18|T1CON|0x18|-|0x18|DACCON0|0x18|-|
>|0x19|T1GCON|0x19|OSCCON|0x19|DACCON1|0x19|-|
>|0x1A|TMR2|0x1A|OSCSTAT|0x1A|-|0x1A|-|
>|0x1B|PR2|0x1B|ADRESL|0x1B|-|0x1B|-|
>|0x1C|T2CON|0x1C|ADRESH|0x1C|-|0x1C|-|
>|0x1D|-|0x1D|ADCON0|0x1D|APFCON|0x1D|-|
>|0x1E|-|0x1E|ADCON1|0x1E|-|0x1E|-|
>|0x1F|-|0x1F|ADCON2|0x1F|-|0x1F|-|
>
>|バンク04|ラベル--------|バンク05|ラベル--------|バンク06|ラベル--------|バンク07|ラベル--------|
>|-:|:-|-:|:-|-:|:-|-:|:-|
>|0x0C|WPUA|0x0C|-|0x0C|-|0x0C|-|
>|0x0D|-|0x0D|-|0x0D|-|0x0D|-|
>|0x0E|-|0x0E|-|0x0E|-|0x0E|-|
>|0x0F|-|0x0F|-|0x0F|-|0x0F|-|
>|0x10|-|0x10|-|0x10|-|0x10|-|
>|0x11|SSP1BUF|0x11|-|0x11|-|0x11|IOCAP|
>|0x12|SSP1ADD|0x12|-|0x12|-|0x12|IOCAN|
>|0x13|SSP1MSK|0x13|-|0x13|-|0x13|IOCAF|
>|0x14|SSP1STAT|0x14|-|0x14|-|0x14|-|
>|0x15|SSP1CON1|0x15|-|0x15|-|0x15|-|
>|0x16|SSP1CON2|0x16|-|0x16|-|0x16|-|
>|0x17|SSP1CON3|0x17|-|0x17|-|0x17|-|
>|0x18|-|0x18|-|0x18|-|0x18|-|
>|0x19|-|0x19|-|0x19|-|0x19|-|
>|0x1A|-|0x1A|-|0x1A|-|0x1A|-|
>|0x1B|-|0x1B|-|0x1B|-|0x1B|-|
>|0x1C|-|0x1C|-|0x1C|-|0x1C|-|
>|0x1D|-|0x1D|-|0x1D|-|0x1D|-|
>|0x1E|-|0x1E|-|0x1E|-|0x1E|-|
>|0x1F|-|0x1F|-|0x1F|-|0x1F|-|
>
>|バンク12|ラベル--------|バンク13|ラベル--------|バンク14|ラベル--------|バンク15|ラベル--------|
>|-:|:-|-:|:-|-:|:-|-:|:-|
>|0x0C|-|0x0C|-|0x0C|-|0x0C|-|
>|0x0D|-|0x0D|-|0x0D|-|0x0D|-|
>|0x0E|-|0x0E|-|0x0E|-|0x0E|-|
>|0x0F|-|0x0F|-|0x0F|-|0x0F|-|
>|0x10|-|0x10|-|0x10|-|0x10|-|
>|0x11|PWM1DCL|0x11|CWG1DBR|0x11|-|0x11|-|
>|0x12|PWM1DCH|0x12|CWG1DBF|0x12|-|0x12|-|
>|0x13|PWM1CON|0x13|CWG1CON0|0x13|-|0x13|-|
>|0x14|PWM2DCL|0x14|CWG1CON1|0x14|-|0x14|-|
>|0x15|PWM2DCH|0x15|CWG1CON2|0x15|-|0x15|-|
>|0x16|PWM2CON|0x16|-|0x16|-|0x16|-|
>|0x17|PWM3DCL|0x17|-|0x17|-|0x17|-|
>|0x18|PWM3DCH|0x18|-|0x18|-|0x18|-|
>|0x19|PWM3CON|0x19|-|0x19|-|0x19|-|
>|0x1A|PWM4DCL|0x1A|-|0x1A|-|0x1A|-|
>|0x1B|PWM4DCH|0x1B|-|0x1B|-|0x1B|-|
>|0x1C|PWM4CON|0x1C|-|0x1C|-|0x1C|-|
>|0x1D|-|0x1D|-|0x1D|-|0x1D|-|
>|0x1E|-|0x1E|-|0x1E|-|0x1E|-|
>|0x1F|-|0x1F|-|0x1F|-|0x1F|-|

オリジナルアーキテクチャCPUの命令表になります、プログラマの使用感ついて評価をしてください。  
PIC16F1シリーズとの命令の比較表を作成してください。  
